<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nedap ONS Uptime Monitor</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="brand">
                <div class="brand-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 6v6l4 2"/>
                    </svg>
                </div>
                <div class="brand-text">
                    <span class="brand-title">NEDAP ONS</span>
                    <span class="brand-subtitle">Uptime Monitor</span>
                </div>
            </div>
            
            <nav class="nav-tabs">
                <button class="nav-tab active" data-tab="dashboard">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"/>
                        <rect x="14" y="3" width="7" height="7"/>
                        <rect x="14" y="14" width="7" height="7"/>
                        <rect x="3" y="14" width="7" height="7"/>
                    </svg>
                    <span>Dashboard</span>
                </button>
                <button class="nav-tab" data-tab="history">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <span>History</span>
                </button>
            </nav>
            
            <div class="system-status">
                <div class="status-row">
                    <div class="status-indicator online"></div>
                    <span class="status-text">System Online</span>
                </div>
                <span class="status-time" id="system-time">--:--:--</span>
                
                <div class="theme-toggle-sidebar">
                    <button class="btn-theme" id="theme-toggle" aria-label="Toggle dark mode">
                        <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"/>
                            <path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                        </svg>
                        <svg class="moon-icon hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
                        </svg>
                        <span class="theme-text">Dark Mode</span>
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <div id="dashboard-tab" class="tab-content active">
                <header class="page-header">
                    <div class="header-left">
                        <h1 class="page-title">Monitoring Dashboard</h1>
                        <p class="page-subtitle">Real-time service health overview</p>
                    </div>
                    <button id="add-btn" class="btn btn-primary">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                            <line x1="12" y1="5" x2="12" y2="19"/>
                            <line x1="5" y1="12" x2="19" y2="12"/>
                        </svg>
                        <span>Add Target</span>
                    </button>
                </header>

                <!-- Stats Overview -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon success">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                                <polyline points="22 4 12 14.01 9 11.01"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="stat-up">0</span>
                            <span class="stat-label">Services Up</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon danger">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <line x1="15" y1="9" x2="9" y2="15"/>
                                <line x1="9" y1="9" x2="15" y2="15"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="stat-down">0</span>
                            <span class="stat-label">Services Down</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon info">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                                <line x1="8" y1="21" x2="16" y2="21"/>
                                <line x1="12" y1="17" x2="12" y2="21"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="stat-total">0</span>
                            <span class="stat-label">Total Monitored</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon warning">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                            </svg>
                        </div>
                        <div class="stat-content">
                            <span class="stat-value" id="stat-avg">0ms</span>
                            <span class="stat-label">Avg Latency</span>
                        </div>
                    </div>
                </div>

                <!-- Targets Table -->
                <div class="targets-container">
                    <div class="targets-header">
                        <span>Name</span>
                        <span>URL</span>
                        <span>Status</span>
                        <span>Last Checked</span>
                        <span>Latency</span>
                        <span>HTTP</span>
                        <span>Error</span>
                        <span>Actions</span>
                    </div>
                    <div id="targets-list" class="targets-list">
                        <div class="empty-state">
                            <div class="empty-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M12 16v-4M12 8h.01"/>
                                </svg>
                            </div>
                            <h3>No targets configured</h3>
                            <p>Add your first monitoring target to get started with uptime monitoring</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- History Tab -->
            <div id="history-tab" class="tab-content">
                <header class="page-header">
                    <div class="header-left">
                        <h1 class="page-title">Check History</h1>
                        <p class="page-subtitle">Detailed monitoring event logs with uptime visualization</p>
                    </div>
                    <div class="header-filters">
                        <select id="history-filter-target" class="filter-select">
                            <option value="">All Targets</option>
                        </select>
                        <select id="history-filter-status" class="filter-select">
                            <option value="">All Status</option>
                            <option value="true">Up</option>
                            <option value="false">Down</option>
                        </select>
                        <select id="history-time-range" class="filter-select">
                            <option value="24">Last 24 Hours</option>
                            <option value="48">Last 48 Hours</option>
                            <option value="168">Last 7 Days</option>
                            <option value="720">Last 30 Days</option>
                        </select>
                    </div>
                </header>

                <!-- Uptime Timeline -->
                <div class="uptime-timeline-card">
                    <div class="timeline-header">
                        <h3>30-Day Uptime History</h3>
                        <span class="timeline-legend">
                            <span class="legend-item"><span class="legend-bar operational"></span> Operational</span>
                            <span class="legend-item"><span class="legend-bar degraded"></span> Degraded</span>
                            <span class="legend-item"><span class="legend-bar down"></span> Down</span>
                        </span>
                    </div>
                    <div id="uptime-timeline" class="timeline-bars">
                        <div class="timeline-loading">Select a target to view uptime history</div>
                    </div>
                    <div class="timeline-footer">
                        <span id="timeline-start">30 days ago</span>
                        <span id="timeline-end">Today</span>
                    </div>
                </div>

                <div class="history-container">
                    <div class="history-header">
                        <span>Timestamp</span>
                        <span>Target</span>
                        <span>Status</span>
                        <span>Latency</span>
                        <span>HTTP</span>
                        <span>Error</span>
                    </div>
                    <div id="history-list" class="history-list">
                        <div class="history-empty">Select filters to view history logs</div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Target Details Panel -->
    <div id="details-panel" class="slide-panel hidden">
        <div class="panel-header">
            <h2 id="details-title" class="panel-title">Target Details</h2>
            <button id="close-details" class="btn btn-icon btn-ghost">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
        </div>
        <div class="panel-content">
            <div class="details-grid">
                <div class="detail-card">
                    <h3>Uptime (30 Days)</h3>
                    <div id="uptime-percentage" class="uptime-big">--%</div>
                    <div id="uptime-details" class="uptime-sub">-- checks</div>
                </div>
                <div class="detail-card">
                    <h3>Latest Checks (24h)</h3>
                    <div id="history-chart" class="recent-list">
                        <p style="color: var(--text-muted); font-size: 14px;">No recent checks</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Modal -->
    <div id="modal" class="modal-overlay hidden">
        <div class="modal-container">
            <div class="modal-header">
                <h2 id="modal-title" class="modal-title">Add Target</h2>
                <button id="cancel-btn" class="btn btn-icon btn-ghost">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <form id="target-form" class="modal-form">
                <input type="hidden" id="target-id">
                <div class="form-row">
                    <div class="form-group">
                        <label for="name">Target Name</label>
                        <input type="text" id="name" name="name" required placeholder="e.g. Production API">
                    </div>
                    <div class="form-group">
                        <label for="url">URL / Endpoint</label>
                        <input type="url" id="url" name="url" required placeholder="https://api.example.com/health">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="interval_s">Check Interval (seconds)</label>
                        <input type="number" id="interval_s" name="interval_s" min="10" max="3600" value="60">
                    </div>
                    <div class="form-group">
                        <label for="timeout_s">Timeout (seconds)</label>
                        <input type="number" id="timeout_s" name="timeout_s" min="1" max="30" value="10">
                    </div>
                </div>
                <div class="form-row checkboxes">
                    <label class="checkbox-label">
                        <input type="checkbox" id="enabled" name="enabled" checked>
                        <span>Enabled</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="verify_tls" name="verify_tls" checked>
                        <span>Verify TLS</span>
                    </label>
                </div>
                <div class="modal-actions">
                    <button type="button" id="cancel-btn-alt" class="btn btn-secondary">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Target</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
